template: update-domain.tt

vars:
  domain: cheese.co.te
  tech: registrant-001

input_assertions:
  class: SRS::EPP::Command::Update::Domain
  count:
    - [ '//domain:name', 1, 'SRS: Check for the domain' ]
    - [ '//domain:add/domain:contact', 1, 'SRS: Check the new tech' ]
    - [ '//domain:rem/domain:contact', 0, 'SRS: Check old tech' ]
  match:
    - [ '//domain:name', 'cheese.co.te', 'SRS: Check the domain name' ]
    - [ '//domain:add/domain:contact', 'registrant-001', 'SRS: Check the new tech' ]
  match_all:
    - [ '//domain:contact/@type', 'tech', 'SRS: Check all contacts are of type tech' ]

SRS:

output_assertions:
  count:
    - [ '//epp:result', 1, 'SRS: Check for one result' ]
  attr_is:
    - [ '//epp:result', 'code', 2002, 'SRS: Check for correct result code' ]
